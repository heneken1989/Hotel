@using Hotel.Models.Shared;
@model Hotel.Dtos.RoomDto
@{
    var disable = Model.Room.IsFulled ? "disabled" : "";
    var disableColor = Model.Room.IsFulled ? "btn-secondary" : "btn-primary";
}
<div class="hero-wrap" style="background-size:fit;background-position:botton; background-image: url('@Url.Content("~/images/HP.png")');">

</div>

@if (ViewData.ContainsKey("success"))
{
    <p class="alert alert-success" role="alert">@ViewData["success"]</p>
}
@if (ViewData.ContainsKey("error"))
{
    <p class="alert alert-danger" role="alert">@ViewData["error"]</p>
}

<section class="ftco-section col-lg-12" >
    <div style="padding : 0 40px">
        <div class="row">
            <div class="col-lg-12">
                <div class="row">
                    <div class="col-lg-12 ftco-animate">
                        <div class="row">


                            <div class="col-lg-8 single-slider owl-carousel">
                                @foreach (var a in @Model.Room.Images)
                                {
                                    var IUrl = $"~/images/{a.Url}";
                                    <div class="item">
                                        <div class="room-img"
                                             style="background-image: url('@Url.Content(@IUrl)');background-size:fit"></div>
                                    </div>

                                }
                            </div>
                            <div class="col-lg-4 sidebar ftco-animate">

                                <div class="sidebar-box ftco-animate" style="border:0.1rem solid #ccc;box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px; ">
                                    <form asp-action="HandleAddOrder" method="post">

                                        @if (Model.Room.IsFulled==false)
                                        {
                                            <input asp-for="@Model.Order.RoomId" hidden value="@Model.Room.Id" />
                                            <input hidden name="id" value="@Model.Room.Id" />
                                            <div class="form-group">
                                                <label class="control-label">Tên</label>
                                                <input required asp-for="@Model.Order.Name" class="form-control" />
                                                <span asp-validation-for="@Model.Order.Name" class="text-danger"></span>


                                            </div>

                                            <div class="form-group">
                                                <label class="control-label">Số điện thoại</label>
                                                <input type="number" required asp-for="@Model.Order.Phone" class="form-control" />
                                                <span asp-validation-for="@Model.Order.Phone" class="text-danger"></span>

                                            </div>
                                            <div class="form-group">
                                                <label class="control-label">Ngày Check in</label>
                                                <input id="dateInput" type="date" required asp-for="@Model.Order.Date" class="form-control" />
                                                <span asp-validation-for="@Model.Order.Date" class="text-danger"></span>

                                            </div>
                                            <div class="form-group">
                                                <label class="control-label">Ghi chú</label>
                                                <input asp-for="@Model.Order.Message" class="form-control" />

                                            </div>
                                        }else{
                                            <div class=" d-fex align-items-center justify-content-center" style=" width:100%; height:40vh">
                                                <p class="h1 text-danger text-center" >Hết Phòng</p>
                                            </div>
                                        }
                                        <div class="form-group">
                                            <input type="submit" value="Gửi" class="btn @disableColor" @disable />
                                        </div>

                                    </form>
                                </div>


                            </div>
                        </div>

                    </div>


                    <div class="col-md-12 room-single  mb-5 ftco-animate" style="margin-top:0">
                        <h1 style="font-size:42px ; text-transform:capitalize" class="text-dark mb-2"> phòng @Model.Room.RoomType.Type</h1>
                        <div style="width:100% " class="d-flex justify-content-start align-items-center">
                      @foreach(var p in Model.Room.Details){
                                <div style="width:fit-content " class="mb-2 mr-5 d-flex justify-content-start align-items-center">
                                    <i class="@CommonMethod.CheckIcon(p.Name)" style="font-size:20px; color:black"></i>
                                    <span class=" ml-2" style="font-size:16px; color:black">@p.Detail</span>
                                </div>
                            }  
                        </div>

                        <p class="mb-4">Family Room Double là loại phòng dành cho 
                            gia đình với số lượng 4-6 người trên diện tích rộng rãi, 
                            có trang bị hiện đại, sang trọng với chi phí tốt nhất</p>

                        <h4 style="font-size:28px; font-weight:bold">Tiện nghi phòng </h4>
                        <div class="d-md-flex mt-2 mb-4" style="width:100% ; flex-flow: wrap">
                         
                                @foreach (var uni in Model.Room.Unities!)
                                {
                                  
                                    <div class="d-flex align-items-center justify-content-start mb-2  " style="width: 25%">
                                    <i class="fa-solid fa-check" style="color:#c7a46d; font-size:20px;margin-right:20px"></i>
                                    <span style="font-size:18px; color:#c7a46d;">
                                            @uni.Name
                                        </span>
                                     </div>     
                                    
                                }       
                        </div>

                        <h4 style="font-size:28px; font-weight:bold">Quy định phòng </h4>
                        <div class="d-md-flex mt-2 mb-4" style="width:100% ; flex-flow: wrap">

                            @foreach (var uni in Model.Policies)
                            {
                                <div class="d-flex align-items-center justify-content-start mb-2  " style="width: 40%">
                                    <i class="fa-solid fa-rectangle-list" style=" font-size:20px;margin-right:20px"></i>
                                    <span style="font-size:18px; ">
                                        @uni.Content
                                    </span>
                                </div>
                              
                            }
                        </div>
                        </div>


                   

                       


                        <h3 class="mb-2">Video :</h3>
                        <div class="col-md-12 col-lg-12 room-single ftco-animate mb-5" style="border-top:0.2rem solid #ccc;padding:1rem">
                            <div class="block-16">
                                <figure style="display: flex; justify-content: center">
                                    <img src='@Url.Content("~/ForntEnd/images/room-4.jpg")'
                                         alt="Image placeholder"
                                         class="img-fluid" />
                                    <a href="https://vimeo.com/45830194"
                                       class="play-button popup-vimeo">
                                        <span class="icon-play"></span>
                                    </a>
                                </figure>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

<script>
    const dateInput = document.getElementById('dateInput');
    const today = new Date();
    const year = today.getFullYear();
    const month = String(today.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed.
    const day = String(today.getDate()).padStart(2, '0');
    const todayFormatted = `${year}-${month}-${day}`;
    dateInput.setAttribute('min', todayFormatted);
</script>